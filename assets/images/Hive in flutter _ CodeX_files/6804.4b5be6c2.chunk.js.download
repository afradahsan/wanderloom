(self.webpackChunklite=self.webpackChunklite||[]).push([[6804],{56804:(e,t,n)=>{"use strict";n.d(t,{S:()=>G});var i=n(96156),a=n(64718),o=n(67294),l=n(86706),r=n(54933),s=n(1249),u=n(29074),d=n(24291),c=n(78457),p=n(11098),m=n(20998),v=n(95983),f=n(75857),b=n(6443),k=n(39507),g=n(18733),h=n(26350),C=n(18627),S=n(66411),y=n(83486),w=n(43487),O=n(51681),E=n(59764),N=n(50458),F=n(13195),P=n(10654),I=n(47628),j=n(81253),D=n(75412),V=n(6342),x=n(93818),L=n(72431),T=n(32317),H=n(87329),A=n(78693),_=n(21177),R={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostVotersDialogQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"voterCount"}},{kind:"Field",name:{kind:"Name",value:"voters"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserInListDialog_user"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}}]}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_post"}}]}}]}}].concat((0,H.Z)(A.s.definitions),(0,H.Z)(_.n.definitions),(0,H.Z)(A.S.definitions))},B=["__typename"];function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=10,q=function(e){var t=e.post,n=e.hide,i=e.isVisible,a=e.fetchMore,l=e.loading;if(!t)return null;var r=t.title,s=t.voters,u=t.clapCount,d=t.voterCount;return o.createElement(x.x,{isVisible:i,fetchMore:a,loading:l,hide:n,title:r,clapCount:null!=u?u:0,voterCount:null!=d?d:0,voters:s?s.items.map((function(e){var n=e.user,i=e.clapCount;return n&&o.createElement(V.F,{user:n,key:n.id,followButton:o.createElement(T.B,{buttonSize:"SMALL",post:t,user:n,susiEntry:"follow_list"}),badge:o.createElement(L.g,{clapCount:i})})})):null})};function $(e){var t=e.postId,n=e.isVisible,i=e.hide;return n?o.createElement(D.A,{ssr:!1,query:R,variables:{postId:t,pagingOptions:{limit:U}},notifyOnNetworkStatusChange:!0},(function(e){var t,a=e.data,l=(a=void 0===a?{}:a).post,r=e.loading,s=e.error,u=e.fetchMore;if(s||null==l||!l.voters)return null;var d=l.voters.pagingInfo&&l.voters.pagingInfo.next;if(d){d.__typename;var c=(0,j.Z)(d,B);t=function(){return u({variables:{pagingOptions:M(M({},c),{},{limit:U})}})}}return o.createElement(q,{hide:i,fetchMore:t,post:l,isVisible:n,loading:r})})):null}var z=n(30020),Q=n(66227);function W(e){var t=e.clapCount,n=e.hasLabel,i=void 0!==n&&n,a=e.showFullNumber,l=void 0!==a&&a,r=e.post,s=e.hasDialog,u=void 0!==s&&s,d=e.shouldShowResponsiveLabelText,c=void 0!==d&&d,p=e.shouldHideClapsText,m=void 0!==p&&p,v=e.countColor,f=e.countScale,b=e.isLoading,k=void 0!==b&&b,g=r.id;if(!(t>0||k))return null;var h=function(e){var n=e.showVoters;return o.createElement(I.$,{showVoters:n,hasLabel:i,showFullNumber:l,shouldShowResponsiveLabelText:c,shouldHideClapsText:m,clapCount:t,countColor:v,countScale:f,isLoading:k})};return u&&g&&!k?o.createElement(Q.B,null,(function(e){var t=e.isVisible,n=e.show,i=e.hide;return o.createElement(o.Fragment,null,o.createElement(z._,{tooltipText:"View Claps",targetDistance:15},o.createElement(h,{showVoters:n})),t&&o.createElement($,{isVisible:!0,hide:i,postId:g}))})):o.createElement(h,null)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e){var t,n=e.post,i=e.buttonStyle,I=e.hasDialog,j=e.shouldShowResponsiveLabelText,D=void 0!==j&&j,V=e.shouldHideClapsText,x=void 0!==V&&V,L=e.shouldHideClapsCount,T=void 0!==L&&L,H=e.susiEntry,A=e.verticalClapsText,_=void 0!==A&&A,R=e.buttonColor,B=e.countScale,Z=e.testId,M=(0,a.a)(P.A,{fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1,variables:{postId:n.id}}),U=M.data,q=M.loading,$=U&&(0,E.f)(U.postResult)?U.postResult.clapCount:null,z=J(J({},n),{},{clapCount:$}),Q=(0,F.C)(),Y=(0,b.H)(),K=Y.value,G=Y.loading,X=null!==(t=null==K?void 0:K.id)&&void 0!==t?t:"",ee=(0,k.T)(n).viewerEdge,te=(0,w.v9)((function(e){return e.config.authDomain})),ne=(0,w.b$)((function(e){return e.multiVote.clapsPerPost})),ie=(0,l.I0)(),ae=(0,C.A)(),oe=(0,S.pK)(),le=(0,O.l)(ne,z,ee),re=le.clapCount,se=le.viewerClapCount,ue=le.viewerHasClappedSinceFetch,de=(0,o.useCallback)((function(){if(se&&se>=v.S2)return"Viewer exceeded authorized claps limit.";var e;e={postId:n.id,clapCount:re+1,viewerClapCount:se+1,viewerHasClappedSinceFetch:!0},ie((0,y.at)(e))}),[se,n.id,re]),ce=(0,o.useCallback)((function(e){Q(z,X,e,ee),ae.event("post.clientUpvote",{postId:n.id,postIds:[n.id],voteCount:e,source:oe})}),[n.id,X,ee,oe]),pe=(0,f.m)({onIncrementClaps:de,onSubmitClapsAccumulated:ce}),me=pe.clappedAt,ve=pe.onFloatEnd,fe=pe.removeBurst,be=pe.clap,ke=pe.isPopping,ge=pe.isShowingViewerClapCount,he=pe.burstOffsets,Ce=pe.onPopEnd;(0,o.useEffect)((function(){return function(){var e;e={postId:n.id},ie((0,y.HQ)(e))}}),[]);var Se,ye=n.collection,we=n.creator,Oe=n.id,Ee=n.isPublished,Ne=n.isLimitedState,Fe=(Se=!(!we||we.id!==X),Ne?"This feature is temporarily disabled":Ee?Se?"You cannot applaud your own story":void 0:"You cannot applaud a draft"),Pe=(0,v.wH)(i,D),Ie=Pe.alwaysShowClapsLabel,je=Pe.hasClapsLabel,De=Pe.buttonScale,Ve=!!(se&&se>0),xe=!!(re&&re>0),Le=ye&&ye.slug?(0,N.JL)(te,ye.slug,Oe):(0,N.kI)(te,Oe);return o.createElement(u.l,{verticalClapsText:_},o.createElement(c.$,{buttonStyle:i,hasClaps:xe||q},X||Fe||G?o.createElement(o.Fragment,null,ge&&o.createElement(g.N8,null,o.createElement(d.q,{count:se,clappedAt:me,onFloatEnd:ve})),o.createElement(m.v,{isPopping:ke,onPopEnd:Ce},o.createElement(s.d,{buttonColor:R,disableReason:Fe,isFilled:Ve,isLoading:G||q,onClickAndHold:be,scale:De,shouldHideClapsText:x,testId:Z})),he.map((function(e){return o.createElement(r.P,{key:e,offset:e,onBurstEnd:fe})}))):o.createElement(h.R,{operation:"register",post:n,user:n.creator,actionUrl:Le,susiEntry:H,testId:Z},o.createElement(s.d,{scale:De,buttonColor:R,shouldHideClapsText:x,testId:Z}))),(xe||q)&&!T&&(!ge||Ie)&&o.createElement(p.W,{buttonStyle:i},o.createElement(W,{post:n,clapCount:re,showFullNumber:ue,hasLabel:je,hasDialog:I,shouldShowResponsiveLabelText:D,shouldHideClapsText:x,countColor:R,countScale:B,isLoading:q})))},G=function(e){var t;return o.createElement(S.cW,{source:{postId:null===(t=e.post)||void 0===t?void 0:t.id},extendSource:!0},o.createElement(K,e))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/6804.4b5be6c2.chunk.js.map