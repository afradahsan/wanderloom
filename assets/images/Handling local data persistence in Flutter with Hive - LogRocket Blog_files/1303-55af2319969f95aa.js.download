"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1303],{95956:function(e,t,n){var r,o=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){return o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10.222v3.556m4.5-7.111v10.666M12 4v16m4.5-13.333v10.666m4.5-7.11v3.555",vectorEffect:"non-scaling-stroke"})))};t.Z=l},396:function(e,t,n){var r,o,i=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=i.createElement("rect",{width:5.179,height:16.5,x:5,y:4,fill:"currentColor",rx:2.589})),o||(o=i.createElement("rect",{width:5.179,height:16.5,x:14.321,y:4,fill:"currentColor",rx:2.589})))};t.Z=a},27377:function(e,t,n){var r,o=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){return o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},e),r||(r=o.createElement("path",{d:"M4.5 4.566c0-1.562 1.71-2.52 3.043-1.706l12.164 7.433c1.277.78 1.277 2.634 0 3.414L7.543 21.14c-1.333.815-3.043-.144-3.043-1.706V4.566Z",vectorEffect:"non-scaling-stroke"})))};t.Z=l},8518:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(66383),o=n(52322);n(97340);var i=n(97512),l=n.n(i),a=n(60845),u=n(13317),s=n(67337),c=n(95956),d=n(396),p=n(27377),f=n(2784),v=n(24886),h=n(5492),g=n(53476),m=n(97818),x=n(64989),b=n(49748),y=n(60058),w=n(63072),C=n(71869);function S(e){var t=e.url,n=e.loading,r=e.size,i=void 0===r?w.Ph.xl:r,l=e.showTooltip,u=e.playDelay,s=e.audioRef,c=e.generateVoice,d=e.tracker;return(0,o.jsx)(w.zx,{buttonType:w.qh.secondary,buttonSize:i,loading:n,className:(0,a.cn)("rounded-full bg-white border border-gray-300 p-0 flex items-center justify-center",{"w-9 h-9 hover:border-gray-400":i===w.Ph.sm,"w-10 h-10 border-none shadow-menu animate-scaleDownUp":i===w.Ph.md,"w-16 h-16 border-none shadow-menu animate-scaleDownUp":i===w.Ph.xl,hidden:void 0===t}),style:(0,y.m)(y.KN.AudioPlayerButton),children:(0,o.jsx)(k,{audioUrl:t,size:i,playDelay:u,audioRef:s,showTooltip:l,generateVoice:c,tracker:d})})}function k(e){var t,n=e.audioUrl,i=e.showTooltip,l=e.size,s=void 0===l?w.Ph.xl:l,d=e.playDelay,p=e.audioRef,v=e.generateVoice,y=e.tracker,S=(0,x.u)().activeStep,k=(0,f.useRef)(!0),T=(0,g.sJ)(b.H.isMuted),Z=(0,g.Zl)(b.H.isVoiceoverPlaying),E=(0,r.Z)((0,h.Z)({playsInline:!0,src:null!=n?n:"",style:{display:"none"}}),4),N=E[0],I=E[1],O=E[2],R=E[3];(0,f.useEffect)(function(){p&&(p.current=R.current)},[p,R]);var P=null==S?void 0:S.id,A=(0,u.D)(n),L=(0,u.D)(P);(0,f.useEffect)(function(){!k.current&&n&&(A!==n||L!==P)&&setTimeout(function(){O.play(),null==y||y.report("Synthetic Voice Played",{})},null!=d?d:0),P&&(k.current=!1)},[n,O,d,A,L,P,y,]),(0,f.useEffect)(function(){Z(I.playing)},[I.playing,Z]),(0,f.useEffect)(function(){N&&(T?O.mute():O.unmute())},[N,O,T]),(0,f.useEffect)(function(){return function(){return Z(!1)}},[Z]);var M=function(){n?I.playing?(O.pause(),null==y||y.report("Synthetic Voice Paused",{})):(O.play(),null==y||y.report("Synthetic Voice Played",{})):null==v||v()},V=(0,m.tq)()?"Tap":"Click";return(0,o.jsx)(C.Z,{content:(0,o.jsxs)("span",{children:[V," to play voiceover"," ",(0,o.jsx)(c.Z,{className:"h-4 w-4 inline"})]}),text:"",placement:"left",disabled:I.playing||!i,offset:[0,12],children:(0,o.jsxs)("div",{className:(0,a.cn)({"h-7 w-7":s===w.Ph.sm,"h-[36px] w-[36px]":s===w.Ph.md,"h-[56px] w-[56px]":s===w.Ph.xl}),onClick:M,children:[N,(0,o.jsx)(j,{isPlaying:(null===(t=R.current)||void 0===t?void 0:t.paused)===!1,duration:I.duration,audioEl:R,shouldReset:A!==n})]})})}function j(e){var t=e.isPlaying,n=e.duration,r=e.audioEl,i=e.shouldReset,a=(0,f.useState)(0),u=a[0],c=a[1];return(0,s.n)(function(){n&&c(function(e){return e+10/n})},t?100:void 0),(0,f.useEffect)(function(){var e;n&&(null==r?void 0:r.current)&&(!t&&n-(null===(e=r.current)||void 0===e?void 0:e.currentTime)==0||i)&&c(0)},[r,n,t,u,i]),(0,o.jsx)(v.Wo,{className:"important",value:u,strokeWidth:6,styles:{root:{width:"100%",height:"100%"},path:{stroke:l().primary.action},trail:{stroke:l().blue[50]}},children:t?(0,o.jsx)(d.Z,{}):(0,o.jsx)(p.Z,{})})}},64010:function(e,t,n){n.d(t,{Z:function(){return k},U:function(){return C}});var r=n(52322),o=n(97512),i=n.n(o),l=n(2784),a=n(97818),u=n(90581),s=n(47842),c=n(21218),d=n(88673),p=[38,40],f=1,v=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(e){r.setUpdatedValue(e.target.value,e)},r.handleKeyDown=function(e){var t,n,o=Number(String(t=e.target.value).replace(/%/g,""));if(!isNaN(o)&&(n=e.keyCode,p.indexOf(n)>-1)){var i=r.getArrowOffset(),l=38===e.keyCode?o+i:o-i;r.setUpdatedValue(l,e)}},r.handleDrag=function(e){if(r.props.dragLabel){var t=Math.round(r.props.value+e.movementX);t>=0&&t<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(t),e)}},r.handleMouseDown=function(e){r.props.dragLabel&&(e.preventDefault(),r.handleDrag(e),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},r.input=null,r.inputId="rc-editable-input-".concat(f++),r}var o=n.prototype;return o.componentDidUpdate=function(e,t){this.props.value!==this.state.value&&(e.value!==this.props.value||t.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))},o.componentWillUnmount=function(){this.unbindEventListeners()},o.getValueObjectWithLabel=function(e){return(0,s.Z)({},this.props.label,e)},o.getArrowOffset=function(){return this.props.arrowOffset||1},o.setUpdatedValue=function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})},o.render=function(){var e,t=this,n={wrap:{position:"relative"},input:{width:"85px",fontSize:"14px",color:"#111827",border:"1px solid #E5E7EB",borderLeft:"none",outline:"none",height:"24px",boxSizing:"border-box",borderRadius:"0 8px 8px 0",float:"left",paddingLeft:"8px",alignItems:"center",display:"flex",justifyContent:"center",lineHeight:"24px"}};return(0,r.jsxs)("div",{style:n.wrap,children:[(0,r.jsx)("input",{id:this.inputId,style:n.input,ref:function(e){return t.input=e},value:null!==(e=this.state.value)&&void 0!==e?e:"",onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?(0,r.jsx)("label",{htmlFor:this.inputId,style:n.label,onMouseDown:this.handleMouseDown,children:this.props.label}):null]})},n}(l.PureComponent||l.Component),h=n(70865),g=n(96670),m=function(e){var t=e.white,n=e.grey,o=e.size,i=e.renderers,a=e.borderRadius,u=e.boxShadow,s=e.children,c={grid:{borderRadius:a,boxShadow:u,absolute:"0px 0px 0px 0px",background:"url(".concat(y(t,n,o,i.canvas),") center left")}};return(0,l.isValidElement)(s)?l.cloneElement(s,(0,g.Z)((0,h.Z)({},s.props),{style:(0,h.Z)({},s.props.style,c.grid)})):(0,r.jsx)("div",{style:c.grid})};m.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var x={},b=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var o=r?new r:document.createElement("canvas");o.width=2*n,o.height=2*n;var i=o.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,o.width,o.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),o.toDataURL()):null},y=function(e,t,n,r){var o="".concat(e,"-").concat(t,"-").concat(n).concat(r?"-server":"");if(x[o])return x[o];var i=b(e,t,n,r);return x[o]=i,i},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){(0,c.Z)(i,n);var o=(0,d.Z)(i);function i(){var e;return(0,u.Z)(this,i),e=o.apply(this,arguments),e.state={focus:!1},e.handleFocus=function(){return e.setState({focus:!0})},e.handleBlur=function(){return e.setState({focus:!1})},e}return i.prototype.render=function(){return(0,r.jsx)(t,{className:"flex",onFocus:this.handleFocus,onBlur:this.handleBlur,children:(0,r.jsx)(e,(0,h.Z)({},this.props,this.state))})},i}(l.Component)}(function(e){var t=e.color,n=e.onClick,o=void 0===n?function(){}:n,i=e.onHover,l=e.title,a=e.children,u=e.focus,s=e.focusStyle,c={swatch:(0,h.Z)({background:t,cursor:"pointer",position:"relative",outline:"none",width:"24px",height:"24px",float:"left",borderRadius:"8px",margin:"0",outlineColor:"rgba(17 ,24 ,39, 0.12)",outlineOffset:"-1px",outlineWidth:"1px",outlineStyle:"solid"},u?void 0===s?{}:s:{})},d=function(e){return o(t,e)},p=function(e){return 13===e.keyCode&&o(t,e)},f=function(e){return i(t,e)},v={};return i&&(v.onMouseOver=f),(0,r.jsxs)("div",(0,g.Z)((0,h.Z)({style:c.swatch,onClick:d,title:void 0===l?t:l,tabIndex:0,onKeyDown:p},v),{children:[a,"transparent"===t&&(0,r.jsx)(m,{borderRadius:c.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"})]}))}),C=[i().blue[600],i().yellow[600],i().green[600],i().purple[700],i().red[600],i().pink[500],i().gray[900],i().white,],S={hash:{background:"#E5E7EB",height:"24px",width:"auto",padding:"0 6px",borderRadius:"8px 0 0 8px",float:"left",textAlign:"center",fontSize:"16px",color:"#111827",display:"flex",alignItems:"center",justifyContent:"end",lineHeight:"24px"},clear:{clear:"both"}},k=function(e){var t=e.onClose,n=e.value,o=e.onChange,i=e.label,u=(0,l.useState)(n),s=u[0],c=u[1];(0,l.useEffect)(function(){c(n.replace("#",""))},[n]);var d=(0,l.useCallback)(function(e){t(),o(e)},[o,t]),p=(0,l.useCallback)(function(e){c(e);var t="#"===e.slice(0,1)?e:"#".concat(e);(0,a.M_)().test(t)&&o(t)},[o]);return(0,r.jsxs)("div",{className:"p-4 flex flex-col",children:[i&&(0,r.jsx)("div",{className:"text-gray-900 text-left mb-3 font-semibold",children:i}),(0,r.jsx)("div",{className:"flex flex-row gap-1",children:C.map(function(e,t){return(0,r.jsx)(w,{color:e,hex:e,onClick:d,focusStyle:{boxShadow:"0 0 4px ".concat(e)}},t)})}),(0,r.jsxs)("div",{className:"flex mt-2",children:[(0,r.jsx)("div",{style:S.hash,children:"#"}),(0,r.jsx)(v,{label:null,value:s,onChange:p}),(0,r.jsx)("div",{style:S.clear})]})]})}},20057:function(e,t,n){n.d(t,{Z:function(){return f}});var r,o=n(70865),i=n(96670),l=n(52322),a=n(60845),u=n(2784),s=n(34883),c=n(60058),d=n(64010),p=function(e){var t=e.color,n=e.labelText,r=e.labelRef,o=e.onClick,i=e.disabled;return(0,l.jsxs)("div",{ref:r,onClick:o,className:(0,a.cn)("flex items-center text-sm w-full",{"cursor-pointer":!i,"cursor-not-allowed":i}),children:[(0,l.jsx)("div",{className:"w-6 h-6 mr-2 flex self-center rounded-lg inner-border",style:{backgroundColor:t}}),(0,l.jsx)("span",{className:"cursor-pointer",children:n})]})},f=function(e){var t,n=e.label,r=e.renderLabel,a=e.colors,f=e.disabled,v=void 0!==f&&f,h=e.triangle,g=void 0===h?"hide":h,m=e.containerClassName,x=e.pickerClassName,b=e.pickerZIndex,y=void 0===b?c.KN.ColorPicker:b,w=(0,u.useState)(!1),C=w[0],S=w[1],k=(0,u.useRef)(null),j=(0,u.useRef)(null);(0,u.useEffect)(function(){var e=function(e){var t=k.current,n=j.current;C&&t&&n&&e.target&&!t.contains(e.target)&&!n.contains(e.target)&&S(!1)};return C?window.addEventListener("click",e,!0):window.removeEventListener("click",e,!0),function(){return window.removeEventListener("click",e,!0)}},[C]);var T=(0,u.useCallback)(function(){v||S(!C)},[v,C]),Z=(0,o.Z)({card:{position:"relative",marginTop:"6px",fontWeight:"normal"},label:{fontSize:"14px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"}},"hide"===g?{triangle:{display:"none"},triangleShadow:{display:"none"}}:{},"top-left"===g?{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}}:{},"top-right"===g?{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}:{});return(0,l.jsxs)("div",(0,i.Z)((0,o.Z)({},(0,s.v)("ColorPicker")),{className:void 0===m?"relative my-2 h-[25px]":m,children:[(void 0===r?p:r)({color:(null===(t=a[0])||void 0===t?void 0:t.value)||void 0,labelText:n,labelRef:j,onClick:T,disabled:v}),C&&(0,l.jsx)("div",{ref:k,className:void 0===x?"absolute top-[30px] left-[-8px]":x,style:{zIndex:y},children:(0,l.jsxs)("div",{style:Z.card,children:[(0,l.jsx)("div",{style:Z.triangleShadow}),(0,l.jsx)("div",{style:Z.triangle}),(0,l.jsx)("div",{className:"rounded-lg shadow-menu bg-white flex items-stretch",children:a.map(function(e,t){return(0,l.jsxs)(u.Fragment,{children:[(0,l.jsx)(d.Z,{onClose:function(){return S(!1)},value:e.value,onChange:e.onChange,label:e.label},e.value+e.label),t!==a.length-1&&(0,l.jsx)("div",{className:"w-px bg-gray-200"})]},"".concat(e,"-").concat(t))})})]})})]}))}},71065:function(e,t,n){n.d(t,{Z:function(){return eZ}});var r,o,i,l=n(98788),a=n(42838),u=n(70865),s=n(96670),c=n(66383),d=n(22970),p=n(52322),f=n(60845),v=n(269),h=n(92642),g=n(25237),m=n.n(g),x=n(2784),b=n(53476),y=n(68428),w=n(97818),C=n(49748);function S(e){return 1e3*Math.max(2.5*e*.03,2.5)}var k=n(64989),j=n(76675),T=n(90016),Z=n(93085),E=n(80537),N=n.n(E),I=n(74876),O=n(41926),R=n(16283),P=n(15529),A=n(60058),L=n(841),M=n.n(L),V=n(79984);function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=function(e){return x.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=x.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m18 15-6-6-6 6",vectorEffect:"non-scaling-stroke"})))},B=n(39232),D=n(34883);function U(e){var t,n=e.hotspot,r=e.navToNextStep,o=e.replay,i=(0,k.u)(),l=i.flow,a=i.activeStep,c=i.customValues,d=(0,b.sJ)(C.H.navInfo),v=(0,x.useMemo)(function(){return(0,P.q)(l)},[l]),h=v.buttonBgColor,g=v.buttonFgColor,m=(null==n?void 0:n.label)||"",y=(null==n?void 0:n.bgColor)||h,S=(null==n?void 0:n.textColor)||g,j=(0,x.useRef)(null),Z=(0,x.useState)(0),E=Z[0],N=Z[1],I=(0,x.useState)(!1),O=I[0],R=I[1],L=!(0===m.length||!j.current||(null===(t=j.current)||void 0===t?void 0:t.clientHeight)===18);return(0,x.useEffect)(function(){var e;L&&N(((null===(e=j.current)||void 0===e?void 0:e.clientHeight)||0)+18)},[m,O,L]),(0,x.useEffect)(function(){return R(!1)},[a]),(0,p.jsxs)("div",(0,s.Z)((0,u.Z)({},(0,D.v)("Caption")),{className:(0,f.cn)("absolute -bottom-10 left-0 right-0 h-10 w-full transition-all ease flex justify-center rounded-b-lg select-none",{"items-start":!O,"items-center":O}),style:{backgroundColor:y,color:S,zIndex:(0,A.LM)(A.KN.Caption),height:O?E:T.BROWSER_BAR_OR_CAPTION_HEIGHT},onMouseOver:function(){!(0,w.tq)()&&L&&R(!0)},onMouseLeave:function(){!(0,w.tq)()&&L&&R(!1)},onClick:function(){(0,w.tq)()&&L&&R(!O)},children:[(0,p.jsx)("div",{className:(0,f.cn)("absolute w-7 h-5 flex items-center justify-center -top-5 rounded-t-lg cursor-pointer",{hidden:!L}),style:{backgroundColor:y,color:S},children:(0,p.jsx)(z,{className:(0,f.cn)("w-4 h-4 transition-all origin-center",{"!rotate-180":O})})}),(0,p.jsx)("div",{className:"flex-none font-bold text-xs h-10 w-10 flex items-center justify-center",children:"".concat(d.stepIndex+1,"/").concat(d.stepCount)}),(0,p.jsxs)("div",{className:(0,f.cn)("flex-grow h-10 py-[10px] relative",{"flex items-center":O,"h-10 overflow-hidden":!O}),children:[(0,p.jsx)("div",{className:(0,f.cn)("absolute transition-all bottom-0 right-0 left-0 w-full h-3 select-none pointer-events-none",{"opacity-0":O,"opacity-50":!O}),style:{backgroundColor:y}}),(0,p.jsx)("div",{ref:j,className:(0,f.cn)("text-sm select-none leading-[18px]",{"h-5":0===m.length,"mt-[1px]":!O}),children:(0,p.jsx)(M(),{markdown:(0,f.withCustomVariables)(m,l.customVariables,c),preventLineBreaks:!0})})]}),(0,p.jsx)("div",{className:"w-10 h-10 cursor-pointer flex-none flex items-center justify-center",onClick:function(){d.stepIndex+1!==d.stepCount?r():o()},children:d.stepIndex+1!==d.stepCount?(0,p.jsx)(V.Z,{className:"h-6 w-6"}):(0,p.jsx)(B.Z,{className:"h-5 w-5"})})]}))}n(80754);var F=n(11761),W=m()(function(){return Promise.all([n.e(8573),n.e(6691),n.e(5139),n.e(9019)]).then(n.bind(n,19019))},{loadableGenerated:{webpack:function(){return[19019]}}}),_=m()(function(){return Promise.all([n.e(8573),n.e(5139),n.e(6336)]).then(n.bind(n,26336))},{loadableGenerated:{webpack:function(){return[26336]}}}),J=m()(function(){return Promise.all([n.e(4424),n.e(8573),n.e(6691),n.e(2825),n.e(2875)]).then(n.bind(n,64710))},{loadableGenerated:{webpack:function(){return[64710]}}}),K=m()(function(){return Promise.all([n.e(4424),n.e(8573),n.e(2825),n.e(7277)]).then(n.bind(n,12766))},{loadableGenerated:{webpack:function(){return[12766]}}}),G=x.memo(function(e){var t=e.hotspots,n=e.addHotspot,r=e.updateHotspot,o=e.deleteHotspot,i=e.onHotspotClick,l=e.inEditMode,a=e.tracker,s=e.isZoomActive,c=e.stageRef,d=e.panAndZoomHotspotsRef,v=e.hotspotTippyRef,h=(0,b.sJ)(C.H.stageDimensions),g=(0,b.sJ)(C.H.selectedHotspot),m=(0,b.sJ)(C.H.mobileInfo).isScreenSizeSmall,y=(0,x.useRef)(null),S=function(e){if(!g&&n&&l&&c.current){var t=c.current.getBoundingClientRect();if(t){var r=(0,w.BD)(e.clientX,e.clientY,h,{top:t.top,left:t.left}),o=r.x,i=r.y;n({coords:{x:(0,w.jz)(o,h),y:(0,w.OW)(i,h)}})}}};return(0,p.jsxs)("div",{ref:d,className:"".concat(F.gq," relative select-none flex w-full h-full"),onDoubleClick:S,children:[l&&(0,p.jsx)("div",{ref:y,className:(0,f.cn)("absolute -top-full -left-full -z-1 rounded-full"),style:{width:F.jH,height:F.jH}}),t.sort(f.sortHotspotsForAnimation).map(function(e,t){var n={key:t,callout:e,onCalloutClick:i,updateCallout:r,deleteCallout:o,tracker:a,stageRef:c,displayAsCaption:m,isZoomActive:s,hotspotTippyRef:v},d={key:t,hotspot:e,onHotspotClick:i,displayAsCaption:m,updateHotspot:r,deleteHotspot:o,tracker:a,stageRef:c,isZoomActive:s,dragCircleRef:y,hotspotTippyRef:v};return"callout"===e.style?l?(0,p.jsx)(W,(0,u.Z)({},n)):(0,p.jsx)(_,(0,u.Z)({},n)):l?(0,p.jsx)(J,(0,u.Z)({},d)):(0,p.jsx)(K,(0,u.Z)({},d))})]})}),q=n(23238),Y=n(33252),X=n(94292),Q=n(27697);function $(){return($=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ee=function(e){return x.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},e),o||(o=x.createElement("path",{fillRule:"evenodd",d:"M9.207 1.293a1 1 0 0 0-1.414 1.414L8.086 3 3.028 8.057c-.372.373-.694.695-.937.981-.257.303-.485.631-.616 1.035a3 3 0 0 0 0 1.854c.131.404.359.732.616 1.035.243.286.565.608.937.98l3.53 3.53c.372.372.694.694.98.937.303.257.631.485 1.035.616a3 3 0 0 0 1.854 0c.404-.131.732-.36 1.035-.616.286-.243.608-.565.98-.937l4.656-4.656a9.18 9.18 0 0 0 .488-.511c.148-.175.308-.397.402-.687.13-.402.13-.834 0-1.236a2.021 2.021 0 0 0-.402-.686 9.19 9.19 0 0 0-.488-.512l-7.89-7.891zM9.5 4.414l-5.03 5.03c-.223.223-.403.403-.55.556h11.166L9.5 4.414z",clipRule:"evenodd"})),i||(i=x.createElement("path",{d:"M20.5 12a1 1 0 0 1 .694.28 9.079 9.079 0 0 1 .34.34c.2.208.468.5.74.833.27.329.558.719.785 1.122.211.375.441.886.441 1.425a3 3 0 0 1-6 0c0-.54.23-1.05.441-1.425.227-.403.516-.793.785-1.122a14.08 14.08 0 0 1 1.08-1.173.995.995 0 0 1 .694-.28zm-18 9a1 1 0 1 0 0 2h12a1 1 0 1 0 0-2h-12z"})))},et=n(96220),en=n(96589),er=n(75475);function eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.delay,o=n.transformInput,i=(0,x.useState)(e),l=i[0],a=i[1],u=(0,x.useRef)(void 0);(0,x.useEffect)(function(){a(e)},[e]);var s=(0,x.useCallback)(function(e){u.current&&(clearTimeout(u.current),u.current=void 0);var t="string"==typeof e?e:e.target.value;return o&&(t=o(t)),a(t),t},[o]),c=(0,x.useCallback)(function(e){var n=s(e);u.current=setTimeout(function(){return t(n)},null!=r?r:1e3)},[s,t,r]),d=(0,x.useCallback)(function(e){var n=s(e);t(n)},[s,t]);return[l,c,d]}var ei=n(6364),el=n(20057),ea=n(47842),eu=n(26297);function es(e){var t,n=e.display,r=void 0===n||n,o=e.fadeIn,i=void 0!==o&&o,l=e.fadeOut,a=void 0!==l&&l,c=e.duration,d=void 0===c?500:c,v=e.className,h=e.children,g=(0,eu.Z)(e,["display","fadeIn","fadeOut","duration","className","children"]),m=(0,x.useState)(!r),b=m[0],y=m[1],w=(0,x.useState)(!i),C=w[0],S=w[1];return(0,x.useEffect)(function(){if(S(r),a&&!r){var e=setTimeout(function(){y(!0)},d);return function(){return clearTimeout(e)}}y(!r)},[r,a,d]),(0,p.jsx)("div",(0,s.Z)((0,u.Z)({className:(0,f.cn)((t={},(0,ea.Z)(t,"transition-opacity duration-".concat(d),i||a),(0,ea.Z)(t,"hidden",b),t),C?"opacity-100":"opacity-0",v)},g),{children:h}))}var ec=n(50930),ed=n(81398),ep=n(79826),ef=n(63072),ev=m()(function(){return Promise.all([n.e(7720),n.e(2239)]).then(n.bind(n,12239))},{loadableGenerated:{webpack:function(){return[12239]}}}),eh=m()(function(){return Promise.resolve().then(n.bind(n,29050))},{loadableGenerated:{webpack:function(){return[29050]}}});function eg(e){var t=e.step,n=e.inEditMode,r=e.isSmallScreenOrTile,o=e.tracker,i=e.updateStep,l=e.onButtonClick,a=e.onOverlayUrlClick,c=(0,k.u)(),d=c.flow,h=c.customValues,g=t.theme,m=t.paths,b=d.belongsToTeam?Y.defaultTeamPrefs.bgColor:Y.defaultUserPrefs.bgColor,y=d.belongsToTeam?Y.defaultTeamPrefs.fgColor:Y.defaultUserPrefs.textColor,w=(0,x.useCallback)(function(e,t){var n=null==m?void 0:m.map(function(n){return n.id===e?(0,u.Z)({},n,t):n});n&&(null==i||i({paths:n}))},[m,i]),C=(0,x.useCallback)(function(e){var t=null==m?void 0:m.filter(function(t){return t.id!==e});null==i||i({paths:t})},[m,i]),S=(0,x.useCallback)(function(){var e,n,r=(null==m?void 0:m.length)?m[m.length-1]:void 0,l=(null==m?void 0:m.length)===1&&m[0].buttonText===ep.SS?(0,s.Z)((0,u.Z)({},m[0]),{buttonText:"Option A"}):null,a=(0,ec.Z)(l?[l]:m||[]).concat([{id:(0,ei.Z)(),buttonColor:r&&null!==(e=r.buttonColor)&&void 0!==e?e:b,buttonTextColor:r&&null!==(n=r.buttonTextColor)&&void 0!==n?n:y,pathType:"step",buttonText:"Option ".concat(["B","C","D"][((null==m?void 0:m.length)||1)-1])},]);null==i||i({paths:a}),o&&o.report("Overlay Button Added",{stepId:t.id})},[m,b,y,i,o,t.id,]),j=g===v.OverlayTheme.Dark;return(0,p.jsxs)("div",{className:"flex flex-col gap-2",children:[null==m?void 0:m.map(function(e){var t=e.buttonColor||b,o=e.buttonTextColor||y;return n?(0,p.jsx)(em,{path:e,updatePath:w,deletePath:m.length>1?C:void 0,buttonBg:t,textColor:o,isDark:j,isSmallScreenOrTile:r},e.id):(0,p.jsx)(X.PD,{path:e,buttonBg:t,textColor:o,isOnlyPath:1===m.length,isSmallScreenOrTile:r,onButtonClick:l,onOverlayUrlClick:a,customVariables:d.customVariables,customValues:h},e.id)}),n&&4>((null==m?void 0:m.length)||0)&&(0,p.jsx)("button",{className:(0,f.cn)("font-semibold relative rounded-lg transition-all opacity-100","bg-transparent text-sm px-8",j?"bg-white/0 text-white/60 border border-white/60 border-dashed hover:border-white/90 hover:bg-white/10 hover:text-white":"bg-gray-900/0 text-gray-900/60 border border-gray-900/30 border-dashed hover:border-gray-900/60 hover:bg-gray-900/[.04] hover:text-gray-900",r?"min-h-8 text-sm px-3 py-1":"min-h-12 text-base px-4 py-2"),onClick:function(e){e.stopPropagation(),S()},children:(0,p.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,p.jsx)(et.Z,{className:"w-[18px] h-[18px]"}),(0,p.jsx)("div",{children:"Add button"})]})})]})}function em(e){var t,n,r=e.path,o=e.updatePath,i=e.deletePath,l=e.buttonBg,a=e.textColor,u=e.isDark,s=e.isSmallScreenOrTile,d=(0,k.u)().fontFamily,v=(0,c.Z)(eo(null!==(t=r.buttonText)&&void 0!==t?t:"",(0,x.useCallback)(function(e){return null==o?void 0:o(r.id,{buttonText:e})},[o,r.id])),3),h=v[0],g=v[1],m=v[2],b=(0,c.Z)(eo(null!==(n=r.url)&&void 0!==n?n:"",(0,x.useCallback)(function(e){(0,w.u1)(e)&&(null==o||o(r.id,{url:e,pathType:"url"}))},[o,r.id]),{transformInput:w.kJ}),2),y=b[0],C=b[1],S=(0,x.useCallback)(function(e){if("url"===e.destinationType)o(r.id,{pathType:(0,w.u1)(y)?"url":"step"});else{var t;o(r.id,{pathType:"step",targetStepId:null===(t=e.targetStep)||void 0===t?void 0:t.id})}},[o,r.id,y]);return(0,p.jsx)(eh,{placement:"top",offset:[0,-4],appendTo:function(){return document.body},tippyClassName:"overflow-visible rounded-xl",wrapperClassName:"flex",render:function(){return(0,p.jsxs)("div",{className:"flex relative items-center justify-start p-1 gap-1",children:[(0,p.jsx)(el.Z,{label:"",colors:[{value:null!=l?l:"",label:"Button color",onChange:function(e){return o(r.id,{buttonColor:e})}},{value:null!=a?a:"",label:"Text color",onChange:function(e){return o(r.id,{buttonTextColor:e})}},],containerClassName:"relative cursor-pointer",pickerClassName:"absolute top-[38px] left-1/2 -translate-x-1/2",renderLabel:function(e){var t=e.labelRef,n=e.onClick;return(0,p.jsxs)("div",{ref:t,onClick:n,className:"flex items-center justify-center h-9 p-2 rounded-lg gap-1 bg-white hover:bg-gray-100 transition-colors",children:[(0,p.jsx)("div",{className:"w-[16px] h-[16px] rounded-full border border-gray-900/[.12]",style:{backgroundColor:l}}),(0,p.jsx)("div",{className:"w-[16px] h-[16px] rounded-full border border-gray-900/[.12]",style:{backgroundColor:a}})]})}}),(0,p.jsx)("div",{className:"w-px h-9 bg-gray-200"}),(0,p.jsx)(ev,{onDestinationSelect:S,path:r,url:y,onUrlChange:C,allowUrls:!0}),i&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"w-px h-9 bg-gray-200"}),(0,p.jsx)(ef.zx,{onClick:function(){return i(r.id)},buttonType:ef.qh.ghost,buttonSize:ef.Ph.md,iconOnly:(0,p.jsx)(ed.Z,{})})]})]})},children:function(e){var t=e.toggle;return(0,p.jsxs)("a",{className:"flex group/chapterBtn relative",children:[(0,p.jsx)("div",{className:(0,f.cn)("border rounded-xl absolute -inset-1 opacity-0 group-hover/chapterBtn:opacity-100 bg-transparent transition-all",{"border-gray-900":!u,"border-white":u})}),(0,p.jsx)("button",{className:(0,f.cn)("font-semibold relative rounded-lg transition-all opacity-100","bg-transparent text-gray-900 hover:bg-gray-100 active:bg-gray-200",s?"min-h-8 text-sm px-3 py-1":"min-h-12 text-base px-4 py-2","px-8 cursor-pointer"),style:{backgroundColor:l,color:a},onClick:function(e){e.stopPropagation(),t()},tabIndex:-1,children:(0,p.jsx)(en.default,{className:(0,f.cn)("text-base font-semibold outline-none bg-transparent border-0 border-transparent ring-0 p-0 resize-none select-all focus:ring-0 text-center max-w-60 flex",{"placeholder-[rgba(255,255,255,.5)]":l&&a.toLowerCase().startsWith("#fff"),"placeholder-[rgba(0,0,0,.5)]":l&&a.startsWith("#000")}),style:{fontFamily:d},placeholder:"Button",value:h,onFocus:function(e){e.target.select()},onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),e.stopPropagation())},onChange:function(e){e.stopPropagation(),e.preventDefault(),g(e)},onBlur:function(){return m(h)}})})]})}})}var ex=n(95589),eb=n(26868),ey=n(71869);function ew(e){var t,n,r,o,i=e.step,l=e.className,a=e.style,d=e.isLastStep,h=e.inEditMode,g=e.isActive,m=e.isSmallScreenOrTile,y=e.overlayControlsRef,S=e.tracker,j=e.exportMode,T=e.updateStep,Z=e.onButtonClick,E=e.onOverlayUrlClick,N=(0,er.Z)(),I=(0,k.u)(),O=I.flow.customVariables,R=I.fontFamily,P=I.customValues,L=i.buttonColor,M=i.buttonTextColor,V=i.buttonType,H=i.theme,z=i.paths,B=i.blur,D=void 0===B?v.OverlayBlur.Medium:B,U=(0,c.Z)(eo(null!==(t=i.title)&&void 0!==t?t:"",(0,x.useCallback)(function(e){return null==T?void 0:T({title:e})},[T])),3),F=U[0],W=U[1],_=U[2],J=(0,c.Z)(eo(null!==(n=i.subtitle)&&void 0!==n?n:"",(0,x.useCallback)(function(e){return null==T?void 0:T({subtitle:e})},[T])),3),K=J[0],G=J[1],q=J[2],Q=(0,c.Z)(eo(null!==(r=i.buttonText)&&void 0!==r?r:"",(0,x.useCallback)(function(e){return null==T?void 0:T({buttonText:e})},[T])),3),$=Q[0],ea=Q[1],eu=Q[2],ec=(0,c.Z)(eo(null!==(o=i.actionUrl)&&void 0!==o?o:"",(0,x.useCallback)(function(e){(0,w.u1)(e)&&(null==T||T({actionUrl:e}))},[T]),{transformInput:w.kJ}),2),ed=ec[0],ep=ec[1],ef=(0,x.useMemo)(function(){return!(0,w.u1)(ed)},[ed]);(0,x.useEffect)(function(){h&&!d&&"url"===V&&(null==T||T({buttonType:"next_step"}))},[V,d,T,h]),(0,x.useEffect)(function(){if(N.flows.mayUseChooseYourOwnAdventure&&h&&V&&!(null==z?void 0:z.length)){var e=[(0,u.Z)({id:(0,ei.Z)(),pathType:"next_step"===V?"step":"url"},ed?{url:ed}:{},$?{buttonText:$}:{},L?{buttonColor:L}:{},M?{buttonTextColor:M}:{}),];null==T||T({paths:e})}},[N.flows.mayUseChooseYourOwnAdventure,V,ed,h,null==z?void 0:z.length,$,L,M,T,]);var ev=(0,b.sJ)(C.H.mobileInfo).isScreenSizeSmall,eh=H===v.OverlayTheme.Dark,em=L||N.hotspotDefaults.backgroundColor||Y.defaultUserPrefs.bgColor,ey=M||N.hotspotDefaults.textColor||(0,w.pK)(em),ew=h&&N.flows.mayUseChooseYourOwnAdventure||(null==z?void 0:z.length)?(0,p.jsx)(eg,{step:i,inEditMode:h,isSmallScreenOrTile:m,tracker:S,updateStep:T,onButtonClick:Z,onOverlayUrlClick:E}):void 0,eS=h&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(el.Z,{label:"",colors:[{value:null!=em?em:"",label:"Button color",onChange:function(e){null==T||T({buttonColor:e,buttonTextColor:""})}},{value:null!=ey?ey:"",label:"Text color",onChange:function(e){null==T||T({buttonTextColor:e})}},],containerClassName:"",pickerClassName:"absolute top-[30px] left-[50%] translate-x-[-50%]",renderLabel:function(e){var t=e.labelRef,n=e.onClick;return(0,p.jsx)("div",{className:"absolute left-4 top-4",ref:t,onClick:n,children:(0,p.jsx)(ee,{className:"h-[18px] w-[18px]"})})}}),(0,p.jsx)(en.default,{className:(0,f.cn)("text-base font-semibold outline-none bg-transparent border-0 border-transparent ring-0 p-0 resize-none select-all focus:ring-0 text-center max-w-[150px]",{"placeholder-[rgba(255,255,255,.3)]":em&&ey.toLowerCase().startsWith("#fff"),"placeholder-[rgba(0,0,0,.3)]":em&&ey.startsWith("#000")}),style:{fontFamily:R},placeholder:"Button",value:$,onFocus:function(e){e.target.select()},onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),e.stopPropagation())},onChange:function(e){e.stopPropagation(),e.preventDefault(),ea(e)},onBlur:function(){return eu($)}})]}),ek=h&&!N.flows.mayUseChooseYourOwnAdventure?(0,p.jsx)(ex.Z,{enabled:!0,trigger:"click",media:"/images/announcement-branching.png",link:"https://app.arcade.software/share/bXyCxvVjOzOYDKg247S9",title:"Upgrade to Growth",content:"With Advanced Branching you can better personalize your audiences' experience.",tracker:S,source:"Overlay",placement:"top",children:(0,p.jsx)("button",{className:(0,f.cn)("flex-1 font-semibold relative rounded-lg transition-all opacity-100","bg-transparent text-sm px-8",eh?"bg-white/0 text-white/60 border border-white/60 border-dashed hover:border-white/90 hover:bg-white/10 hover:text-white":"bg-gray-900/0 text-gray-900/60 border border-gray-900/30 border-dashed hover:border-gray-900/60 hover:bg-gray-900/[.04] hover:text-gray-900",m?"min-h-8 text-sm px-3 py-1":"min-h-12 text-base px-4 py-2"),children:(0,p.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,p.jsx)(et.Z,{className:"w-[18px] h-[18px]"}),(0,p.jsx)("div",{children:"Add button"})]})})}):void 0;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(es,{className:"absolute inset-0",style:a,display:g,fadeOut:!h,children:(0,p.jsx)(X.aV,{chooseYourOwnAdventureOverride:ew,isDark:eh,blur:D,isScreenSizeSmall:ev,inEditMode:h,exportMode:j,className:l,title:F,isSmallScreenOrTile:m,fontFamily:R,subtitle:K,buttonType:V,actionUrl:ed,buttonBg:em,textColor:ey,onButtonClick:Z,onOverlayUrlClick:E,onTitleChange:W,onSubtitleChange:G,flushTitle:_,flushSubtitle:q,buttonText:$,buttonContentOverride:eS,customVariables:O,customValues:P,addButtonPaywalled:ek})}),y&&(0,p.jsx)(eb.Z,{targetRef:y,children:h&&T&&i.type===v.StepType.Overlay&&g&&(0,p.jsxs)("div",(0,s.Z)((0,u.Z)({className:"hidden sm:flex w-full justify-center flex-col md:flex-row items-center gap-3 lg:gap-6 p-0.5 shrink-0 rounded-lg bg-gray-50"},(0,A.i8)(A.KN.OverlayControls)),{children:[(0,p.jsxs)("div",{className:"flex justify-start items-center md:items-start lg:items-center flex-col lg:flex-row gap-1.5 lg:gap-3",children:[(0,p.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Theme"}),(0,p.jsx)(eC,{configs:[{id:v.OverlayTheme.Dark,label:"Dark"},{id:v.OverlayTheme.Light,label:"Light"},],selectedConfigId:H,onSelect:function(e){return T({theme:e})},isDark:eh})]}),(0,p.jsx)("div",{className:"hidden lg:flex w-px h-8 bg-gray-200"}),(0,p.jsxs)("div",{className:"flex justify-start items-center md:items-start lg:items-center flex-col lg:flex-row gap-1.5 lg:gap-3",children:[(0,p.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Blur"}),(0,p.jsx)(eC,{configs:[{id:v.OverlayBlur.None,label:"Off"},{id:v.OverlayBlur.Small,label:"S"},{id:v.OverlayBlur.Medium,label:"M"},],selectedConfigId:D,onSelect:function(e){return T({blur:e})},isDark:eh})]}),!N.flows.mayUseChooseYourOwnAdventure&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"hidden lg:flex w-px h-8 bg-gray-200"}),(0,p.jsxs)("div",{className:"flex justify-start items-center md:items-start lg:items-center flex-col lg:flex-row gap-1.5 lg:gap-3",children:[(0,p.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Destination"}),(0,p.jsx)(eC,{configs:[{id:"next_step",label:d?"First step":"Next step"},{id:"url",label:"URL",disabled:!d||!N.mayUseURLDestinationInOverlay,disabledTooltipText:N.mayUseURLDestinationInOverlay?"URL destinations are only available on an Arcade’s last step":"URL destinations are only available on paid plans",containsTextInput:!0,textInputValue:ed,onTextInputChange:ep,invalidTextInput:ef,invalidTextInputTooltip:"Please enter a valid URL"},],selectedConfigId:V,onSelect:function(e){return T({buttonType:e})},isDark:eh})]})]})]}))})]})}function eC(e){var t=e.configs,n=e.selectedConfigId,r=e.onSelect;return n||(n=t[0].id),(0,p.jsx)("div",{className:"flex gap-1 items-center justify-center rounded-[10px] bg-gray-100 p-1 shrink-0",children:t.map(function(e){var t=e.id,o=e.label,i=e.disabled,l=e.disabledTooltipText,a=e.containsTextInput,u=e.textInputValue,s=e.onTextInputChange,c=e.invalidTextInput,d=e.invalidTextInputTooltip,v=t===n;return(0,p.jsx)("div",{className:(0,f.cn)("flex justify-center items-center px-3 h-8 shrink-0 rounded-lg cursor-pointer border transition-all min-w-[32px]",{"bg-white border-gray-200 hover:bg-gray-50":v,"bg-gray-100 border-gray-100 hover:bg-gray-200":!v&&!i,"bg-gray-100 border-gray-100":i}),onClick:function(){return!i&&!v&&r(t)},children:(0,p.jsxs)("div",{className:(0,f.cn)("flex items-center text-xs font-semibold shrink-0 text-gray-900",{"text-gray-500":i}),children:[o,a&&v&&(0,p.jsx)(ey.Z,{placement:"top",interactive:!0,appendTo:function(){return document.body},maxWidth:300,text:d||"",disabled:!c||!d,visible:!0,children:(0,p.jsx)("input",{type:"url",className:(0,f.cn)("text-xs bg-transparent max-w-md border-0 outline-none focus:outline-none focus:ring-0",c?"text-critical-action":"text-gray-900"),value:u,onChange:function(e){null==s||s(e.target.value)},placeholder:"https://example.com",autoFocus:!0})}),i&&l&&(0,p.jsx)(ey.Z,{placement:"top",interactive:!0,appendTo:function(){return document.body},maxWidth:300,text:l,children:(0,p.jsx)("div",{children:(0,p.jsx)(Q.Z,{className:(0,f.cn)("ml-[6px] cursor-pointer transition-colors w-3 h-3 hover:text-gray-700 text-gray-500")})})})]})},t)})})}var eS=m()(function(){return Promise.all([n.e(4424),n.e(4872),n.e(76)]).then(n.bind(n,80076))},{loadableGenerated:{webpack:function(){return[80076]}}}),ek=m()(function(){return Promise.all([n.e(7720),n.e(9858),n.e(1325)]).then(n.bind(n,30839))},{loadableGenerated:{webpack:function(){return[30839]}}}),ej=m()(function(){return Promise.all([n.e(5338),n.e(8518),n.e(2202)]).then(n.bind(n,18518))},{loadableGenerated:{webpack:function(){return[18518]}}}),eT=m()(function(){return Promise.all([n.e(2341),n.e(9599)]).then(n.bind(n,69599))},{loadableGenerated:{webpack:function(){return[69599]}}}),eZ=function(e){var t,n,r,o,i,g,m,E,L,M,V,H,z,B,D,F,W,_,J,K,Y,X,Q,$,ee,et,en,er,eo,ei,el,ea,eu,es,ec,ed,ep=e.flow,ef=e.updateStep,ev=e.updateHotspot,eh=e.deleteHotspot,eg=e.addHotspot,em=e.updateCTA,ex=e.audioRef,eb=e.isWatermarkDisplayed,ey=e.inEditMode,eC=void 0!==ey&&ey,eZ=e.disableCTA,eE=e.disableNavigation,eN=e.disablePlayButton,eI=void 0!==eN&&eN,eO=e.disableTracking,eR=void 0!==eO&&eO,eP=e.tracker,eA=e.onSplitVideo,eL=e.editorVideoControlsRef,eM=e.viewerVideoControlsRef,eV=e.overlayControlsRef,eH=e.stageRef,ez=e.exportMode,eB=e.children,eD=(0,x.useRef)(!1),eU=(0,x.useRef)(null),eF=(0,x.useRef)(null),eW=(0,k.u)(),e_=eW.hasBackground,eJ=eW.hasWrapper,eK=eW.activeStep,eG=eW.setActiveStep,eq=(0,b.sJ)(C.H.isFullscreen),eY=(0,b.sJ)(C.H.hotspotInspectorIsOpen),eX=(0,b.sJ)(C.H.historyStack),eQ=(0,b.sJ)(C.H.stageDimensions),e$=(0,b.sJ)(C.H.isVoiceoverPlaying),e0=(0,c.Z)((0,b.FV)(C.H.selectedHotspot),2),e1=e0[0],e2=e0[1],e3=(0,b.Zl)(C.H.firstStepContentIsReady),e6=(0,b.Zl)(C.H.hasInteractedWithPage),e5=(W=(0,x.useRef)(!1),_=(0,j.S)(eH),(0,x.useMemo)(function(){return!!(null==_?void 0:_.isIntersecting)&&(null==_?void 0:_.boundingClientRect.height)>0&&(null==_?void 0:_.boundingClientRect.width)>0},[null==_?void 0:_.boundingClientRect.height,null==_?void 0:_.boundingClientRect.width,null==_?void 0:_.isIntersecting,])&&!W.current&&(W.current=!0),W.current),e8=(0,O.ZP)({steps:ep.steps,activeStep:eK,skip:!e5}),e4=e8.renderedSteps,e9=e8.renderedInteractiveSteps,e7=e8.onPreloadStep,te=e8.onLoadStep,tt=(0,x.useCallback)(function(e){te(e),e3(!0)},[e3,te]),tn=(0,x.useState)(!1),tr=tn[0],to=tn[1],ti=(0,c.Z)((0,b.FV)(C.H.zoomPreviewOn),2),tl=ti[0],ta=ti[1],tu=(0,c.Z)((0,b.FV)(C.H.mouseIsOnTopOfHotspot),2),ts=tu[0],tc=tu[1],td=(0,x.useCallback)(function(e){return!eC&&eP.report("Video Ended",{stepId:e})},[eP,eC]),tp=null!=eK?eK:ep.steps[0],tf=ep.steps.findIndex(function(e){return e.id===tp.id});K=(J={src:ep.backgroundMusicUrl,enabled:!eC,hasArcadeEnded:(0,R.Is)(ep,tp.id),duckingEnabled:tp.type===v.StepType.Video&&!tp.muted||e$}).src,Y=J.enabled,X=J.hasArcadeEnded,Q=J.duckingEnabled,$=(0,x.useRef)(),ee=(0,x.useRef)(),et=(0,x.useRef)(),en=(0,x.useRef)(0),eo=(er=(0,c.Z)((0,b.FV)(C.H.isMuted),2))[0],ei=er[1],el=(0,b.sJ)(C.H.hasInteractedWithPage),(0,x.useEffect)(function(){if(!$.current&&Y&&K)return $.current=new Audio(K),$.current.crossOrigin="anonymous",$.current.loop=!0,$.current.pause(),$.current.addEventListener("play",function(){if($.current&&!ee.current&&!et.current){var e;ee.current=new AudioContext,et.current=ee.current.createGain(),et.current.gain.value=1,(null===(e=ee.current)||void 0===e?void 0:e.createMediaElementSource($.current)).connect(et.current),et.current.connect(ee.current.destination)}},{once:!0}),function(){var e;null===(e=$.current)||void 0===e||e.pause(),$.current=void 0}},[Y,K]),ea=(0,x.useCallback)(function(){var e;$.current&&et.current&&0!==en.current&&(et.current.gain.cancelScheduledValues(en.current),et.current.gain.setValueAtTime(null!==(e=et.current.gain.value)&&void 0!==e?e:.1,$.current.currentTime),et.current.gain.linearRampToValueAtTime(1,$.current.currentTime+.5))},[]),eu=(0,x.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if($.current&&et.current){var r=$.current.currentTime+n;et.current.gain.setValueAtTime(e,$.current.currentTime),et.current.gain.linearRampToValueAtTime(t,r),en.current=$.current.currentTime}},[]),es=(0,x.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return eu(1,e,t)},[eu]),ec=(0,x.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return eu(.1,e,t)},[eu]),(0,x.useEffect)(function(){if(Y&&$.current&&($.current.paused||(Q?es(.1,.5):(ea(),ec())),$.current.onplay=function(){var e;return(null===(e=$.current)||void 0===e?void 0:e.muted)===!1&&ei(!1)},X))return es(0,5)},[Y,X,Q,ei,es,ec,ea,]),(0,x.useEffect)(function(){$.current&&($.current.muted=eo)},[eo]),ed=(0,x.useCallback)(function(){$.current&&Y&&$.current.play()},[Y]),(0,x.useEffect)(function(){el&&ed()},[el,ed]),(0,x.useEffect)(function(){var e=function(){return e6(!0)};window.addEventListener("mousedown",e,{capture:!0,once:!0})},[e6]);var tv,th=(0,x.useMemo)(function(){return(0,f.getNextNonEmptyIndexedStep)(ep.steps,tp,!0)},[ep.steps,tp]),tg=(0,x.useMemo)(function(){return(0,f.getNextNonEmptyAutoStep)(ep.steps,tp,!0)},[ep.steps,tp]),tm=(0,x.useCallback)((0,l.Z)(function(){var e,t,n,r,o,i,l,a,u,s,c,p,f,g,m=arguments;return(0,d.__generator)(this,function(d){switch(d.label){case 0:if(t=(e=m.length>0&&void 0!==m[0]?m[0]:{}).hotspot,n=e.path,eC||!(r=t||n?null!=(i=(o=(null==t?void 0:t.targetId)||(null==n?void 0:n.targetStepId))?ep.steps.find(function(e){return e.id===o}):void 0)?i:th:tg))return[2];if(r.type!==v.StepType.Video||!(l=document.getElementById(r.id)))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,l.play()];case 2:return d.sent(),[3,4];case 3:return a=d.sent(),(0,h.Tb)(a),[3,4];case 4:return eG(r.id),(r.type===v.StepType.Image||r.type===v.StepType.Overlay)&&eX.add(r.id),!eC&&ep.status===v.PublishStatus.published&&tp&&(t?eP.report("Hotspot Clicked",{stepId:null!==(u=tp.id)&&void 0!==u?u:"",hotspotId:t.id,hotspotLabel:t.label,targetStepId:r?t.targetId:"Unassigned"}):eP.report("Overlay Clicked",{stepId:null!==(s=tp.id)&&void 0!==s?s:"",title:null!==(c=tp.title)&&void 0!==c?c:"",subtitle:null!==(p=tp.subtitle)&&void 0!==p?p:"",buttonLabel:n?null!==(f=n.buttonText)&&void 0!==f?f:"":null!==(g=tp.buttonText)&&void 0!==g?g:"",linkType:"button",linkUrl:"",isCta:!1})),[2]}})}),[eC,eG,eX,ep.status,ep.steps,tp,th,tg,eP,]),tx=(0,x.useCallback)((tv=(0,l.Z)(function(e){var t,n,r,o,i,l,a,u,s,c;return(0,d.__generator)(this,function(d){return eC||(n=(null==tp?void 0:tp.id)===(null===(t=ep.steps[ep.steps.length-1])||void 0===t?void 0:t.id),ep.status===v.PublishStatus.published&&tp&&eP.report("Overlay Clicked",{stepId:null!==(r=tp.id)&&void 0!==r?r:"",title:null!==(o=tp.title)&&void 0!==o?o:"",subtitle:null!==(i=tp.subtitle)&&void 0!==i?i:"",buttonLabel:e?null!==(l=e.buttonText)&&void 0!==l?l:"":null!==(a=tp.buttonText)&&void 0!==a?a:"",linkType:"link",linkUrl:e?null!==(u=e.url)&&void 0!==u?u:"":null!==(s=tp.actionUrl)&&void 0!==s?s:"",isCta:!e||n,buttonId:null!==(c=null==e?void 0:e.id)&&void 0!==c?c:""})),[2]})}),function(e){return tv.apply(this,arguments)}),[tp,ep.status,ep.steps,eC,eP]);(0,x.useEffect)(function(){if(!eK){var e=eC?ep.steps[0]:(0,f.getFirstNonEmptyStep)(ep.steps);e&&(eG(e.id),(null==eX?void 0:eX.add)&&e&&eX.add(e.id))}},[ep.id,eX]);var tb=(0,x.useCallback)(function(e){return 0===ep.steps.findIndex(function(t){return t.id===e})},[ep.steps]);(0,x.useEffect)(function(){if(eC&&!tr&&!e1&&ep.created.toISOString()===ep.modified.toISOString()&&tb(tp.id)){var e,t=null===(e=tp.hotspots)||void 0===e?void 0:e[0];t&&(to(!0),e2(t))}},[e1,tp.hotspots,tp.id,ep.created,ep.modified,eC,tb,e2,tr,]),(0,x.useEffect)(function(){eD.current||tb(tp.id)||(eD.current=!0)},[tp.id,tb]);var ty,tw,tC,tS,tk,tj,tT,tZ,tE,tN,tI,tO,tR,tP,tA,tL,tM,tV,tH,tz,tB,tD,tU,tF,tW,t_,tJ,tK,tG,tq,tY,tX,tQ,t$,t0,t1,t2,t3,t6,t5,t8,t4,t9,t7,ne=(0,b.sJ)(C.H.mobileInfo),nt=ne.isScreenSizeSmall,nn=ne.isMobile,nr=(0,x.useMemo)(function(){return(0,P.q)(ep)},[ep]).buttonBgColor,no=(0,x.useMemo)(function(){return(0,O.sc)(ep.steps)},[ep.steps]),ni=(0,x.useMemo)(function(){return no.filter(function(e){return!e.hiddenFromNavigation})},[no]),nl=(tw=(0,k.u)().activeStep,tS=(tC=(0,c.Z)((0,b.FV)(C.H.navInfo),2))[0],tk=tC[1],(0,x.useEffect)(function(){var e=null!=tw?tw:no[0];tk({stepCount:no.length,stepIndex:no.findIndex(function(t){return t.id===e.id})})},[tw,tk,no]),tS),na=(tT=(tj={enabled:!eC&&ep.autoplay&&!ez,activeStep:eK,onNextStep:tm,audioRef:ex}).enabled,tZ=tj.activeStep,tE=tj.audioRef,tN=tj.onNextStep,tO=(tI=(0,c.Z)((0,b.FV)(C.H.isAutoplayActive),2))[0],tR=tI[1],tP=(0,b.Zl)(C.H.isMuted),tA=(0,b.sJ)(C.H.hasInteractedWithPage),tL=(0,b.sJ)(C.H.isArcadeFrameVisible),tV=(tM=(0,x.useState)(null))[0],tH=tM[1],tz=(0,x.useCallback)(function(){tV&&clearTimeout(tV),tH(null),tR(!1)},[tR,tV]),(0,x.useEffect)(function(){tT&&tO||tz()},[tT,tz,tO]),(0,x.useEffect)(function(){tT&&(tR(!0),tP(!tA))},[tT,tA,tR,tP]),(0,x.useEffect)(function(){if(tZ&&tL){var e,t=function(){tH(setTimeout(function(){tN()},function(e,t){var n=0,r=0;if((null===(o=e.syntheticVoice)||void 0===o?void 0:o.url)&&(null==t?void 0:null===(i=t.current)||void 0===i?void 0:i.duration)&&(n=1e3*t.current.duration+2e3),e.type===v.StepType.Image&&(r=S(e.hotspots.reduce(function(e,t){return t.defaultOpen?e+t.label.length:e},0))),e.type===v.StepType.Overlay){var o,i,l,a=e.buttonText;(null===(l=e.paths)||void 0===l?void 0:l.length)&&(a=e.paths.reduce(function(e,t){return[e,t.buttonText].join("")},"")),r=S([e.title,e.subtitle,a].join("").length)}return Math.max(n,r)}(tZ,tE)))},n=null==tE?void 0:tE.current;return tZ.type!==v.StepType.Video&&(n&&(null===(e=tZ.syntheticVoice)||void 0===e?void 0:e.url)?n.addEventListener("canplaythrough",t):t()),function(){return null==n?void 0:n.removeEventListener("canplaythrough",t)}}},[tZ,tN,tR,tL,tE,tA,]),(0,x.useEffect)(function(){return function(){tV&&clearTimeout(tV)}},[tV]),{turnOffAutoplay:(0,x.useCallback)(function(){tR(!1)},[tR])}).turnOffAutoplay,nu=(0,x.useCallback)(function(e){na(),eP.report("Progress Bar Nav Clicked",{fromStepId:tp.id,toStepId:e.id}),eG(e.id)},[tp.id,eG,na,eP]),ns=(0,x.useCallback)(function(){var e,t,n,r=nl.stepIndex;if(r!==nl.stepCount-1){var o=ep.steps.find(function(e){return e.id===tp.id}),i=null==o?void 0:null===(e=o.hotspots)||void 0===e?void 0:null===(t=e[0])||void 0===t?void 0:t.targetId;(n=i?ep.steps.find(function(e){return e.id===i}):no[(r+1)%no.length])&&(nu(n),eP.report("Navigated With Arrow Right Key",{fromStepId:tp.id,toStepId:n.id}))}},[tp.id,ep.steps,nl.stepCount,nl.stepIndex,no,nu,eP,]),nc=(0,x.useCallback)(function(){var e=nl.stepIndex;if(0!==e){var t=e-1<0?no.length-1:e-1;nu(no[t]),eP.report("Navigated With Arrow Left Key",{fromStepId:tp.id,toStepId:no[t].id})}},[tp.id,nl.stepIndex,no,nu,eP,]),nd=(0,x.useMemo)(function(){var e;return((null==eK?void 0:eK.type)===v.StepType.Image||(null==eK?void 0:eK.type)===v.StepType.Video)&&!!(null==eK?void 0:null===(e=eK.panAndZoom)||void 0===e?void 0:e.enabled)},[null==eK?void 0:null===(t=eK.panAndZoom)||void 0===t?void 0:t.enabled,null==eK?void 0:eK.type]),np=(0,x.useMemo)(function(){var e;return null==eK?void 0:null===(e=eK.hotspots)||void 0===e?void 0:e[0]},[eK]),nf=(tU=void 0===(tD=(tB={position:{x:null!==(V=null==np?void 0:np.x)&&void 0!==V?V:0,y:null!==(H=null==np?void 0:np.y)&&void 0!==H?H:0,left:null==eK?void 0:null===(n=eK.panAndZoom)||void 0===n?void 0:null===(r=n.position)||void 0===r?void 0:r.left,top:null==eK?void 0:null===(o=eK.panAndZoom)||void 0===o?void 0:null===(i=o.position)||void 0===i?void 0:i.top},containerDimensions:{width:eQ.width,height:eQ.height},zoomLevel:null!==(z=null==eK?void 0:null===(g=eK.panAndZoom)||void 0===g?void 0:g.zoomLevel)&&void 0!==z?z:1.5,triggerOnChange:eK,shouldZoom:nd&&(!eC||tl),easing:null!==(B=null==eK?void 0:null===(m=eK.panAndZoom)||void 0===m?void 0:m.easing)&&void 0!==B?B:"Gentle",delay:eC?0:null!==(D=null==eK?void 0:null===(E=eK.panAndZoom)||void 0===E?void 0:E.delay)&&void 0!==D?D:0}).zoomLevel)?T.DEFAULT_ZOOMED_IN_LEVEL:tD,tF=tB.position,tW=tB.triggerOnChange,t_=tB.shouldZoom,tJ=tB.containerDimensions,tK=tB.easing,tG=tB.delay,tY=(tq=(0,c.Z)((0,b.FV)(C.H.zoomBox),2))[0],tX=tq[1],tQ=(0,b.Zl)(C.H.isPanAndZoomAnimationActive),t$=(0,b.sJ)(C.H.zoomPreviewOn),t1=(t0=(0,c.Z)((0,Z.H)(),2))[0],t2=t0[1],t6=(t3=(0,c.Z)((0,Z.H)(),2))[0],t5=t3[1],(0,x.useEffect)(function(){return tX(function(e){return(0,s.Z)((0,u.Z)({},e),{zoomLevel:tU})})},[tX,tU]),t8=(0,x.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;tX({top:0,left:0,height:tJ.height,width:tJ.width,zoomLevel:e})},[tJ.height,tJ.width,tX]),t4=(0,x.useCallback)(function(){var e=tJ.width,t=tJ.height,n=e/tU,r=t/tU;if(!N()(tF.top)&&!N()(tF.left)){var o=tF.x,i=tF.y,l=o<=1?o*e:o,a=i<=1?i*t:i,u=(l-n/2)*tU,s=(a-r/2)*tU;u=(u=u/tU+n>e?u-l/2+(n*tU-l):u)<0?0:u,tX({top:-(s=(s=s/tU+r>t?s-a/2+(r*tU-a):s)<0?0:s),left:-u,height:r,width:n,zoomLevel:tU})}N()(tF.top)&&N()(tF.left)&&tX({top:tF.top*t,left:tF.left*e,height:r,width:n,zoomLevel:tU})},[tJ.height,tJ.width,tF.left,tF.top,tF.x,tF.y,tX,tU,]),(0,x.useEffect)(function(){return t4()},[tW,t4]),t9=(0,x.useMemo)(function(){return!!(tY.zoomLevel>1&&t_)},[t_,tY.zoomLevel]),t7=(0,I.D)(t_),(0,x.useEffect)(function(){if(!t$||t7!==t_){var e={top:t_?tY.top:0,left:t_?tY.left:0,scale:t_?tY.zoomLevel:1,originX:0,originY:0},t={ease:[.4,0,.2,1],duration:Math.min(.8*tY.zoomLevel,2)},n={ease:[.4,0,.2,1],duration:Math.min(1.5*tY.zoomLevel,3)},r=(0,s.Z)((0,u.Z)({},"Gentle"===tK?t:"Quick"===tK?{type:"spring",stiffness:100,damping:18}:n),{delay:tG,onPlay:function(){return tQ(!0)},onComplete:function(){return tQ(!1)}});t1.current&&t2(t1.current,e,r),t6.current&&t5(t6.current,e,r)}},[t1,t2,tY.zoomLevel,tY.left,tY.top,t_,tQ,t$,t5,t6,tK,tG,tY,t7,]),{zoomIn:t4,zoomOut:t8,setZoomBox:tX,zoomLevel:tU,zoomBox:tY,isZoomActive:t9,stageScope:t1,hotspotsScope:t6}),nv=nf.zoomIn,nh=nf.zoomOut,ng=nf.zoomBox,nm=nf.isZoomActive,nx=nf.stageScope,nb=nf.hotspotsScope,ny=(0,x.useCallback)(function(e){var t,n=e.clientX,r=e.clientY;if(!eY){var o=null==document?void 0:null===(t=document.elementsFromPoint)||void 0===t?void 0:t.call(document,n,r);if((null==o?void 0:o.length)&&o.slice(0,10).find(function(e){return(0,a.Z)(e,HTMLElement)&&"mouseoverOverrideEnabledOnPanandzoom"in e.dataset})){tc(!0);return}if(eY)return;tc(!1)}},[eY,tc]),nw=(0,x.useCallback)(function(e){na(),tm({hotspot:e})},[tm,na]);return(0,y.x6)("ArrowRight",{},ns,!0,eC),(0,y.x6)("ArrowLeft",{},nc,!0,eC),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{ref:eH,className:(0,f.cn)("relative group flex w-full h-full",{"cursor-zoom-out":nm&&nd&&!eC,"cursor-zoom-in":!nm&&nd&&!eC,"overflow-hidden":!eY,"border border-[rgba(0,0,0,0.1)] rounded-lg":!nt&&!nn&&!eJ&&!ez,"rounded-b-lg":!nt&&!nn&&!ez}),onClick:function(e){var t;(null==eK?void 0:null===(t=eK.panAndZoom)||void 0===t?void 0:t.enabled)&&(e.stopPropagation(),nm&&nd&&!eC?nh():nv())},onMouseMove:function(e){var t;return eC&&(null==eK?void 0:null===(t=eK.panAndZoom)||void 0===t?void 0:t.enabled)&&!tl&&ny(e)},children:[(0,p.jsxs)("div",{ref:nx,className:(0,f.cn)("absolute select-none z-0 flex w-full h-full",{"overflow-hidden":!nt&&!nn&&!eJ,"overflow-hidden rounded-b-lg":eC&&eJ}),style:(0,u.Z)({},eq?{}:{height:eQ.height}),children:[(0,p.jsx)("div",{className:(0,f.cn)("relative flex w-full h-full",{"overflow-hidden":!eJ&&(e_&&!nt||eC)}),style:{zIndex:eC?"":"-1"},children:e4.map(function(e){var t=ep.steps.findIndex(function(t){return t.id===e.id}),n=e.id===tp.id,r=tp.type===v.StepType.Overlay&&(tf===ep.steps.length-1?t===tf-1:(null==tg?void 0:tg.id)===e.id),o=n||r;return e.type===v.StepType.Image?(0,p.jsx)(q.Z,{src:e.url,alt:e.name,layout:"fill",onLoadingComplete:function(){tt(e.id)},className:(0,f.cn)("absolute top-0 w-full object-cover h-full flex",{"opacity-100 transition-none":o&&eD.current,"opacity-100 transition-opacity duration-1000":o&&!eD.current,"opacity-0 z-[-99999999]":!o}),blurhash:e.blurhash,priority:o,sizes:"(min-width: 1em) 100vw, 100vw"},"image-".concat(e.id)):e.type===v.StepType.Video?(0,p.jsx)(ej,{step:e,disablePlayButton:eI,disableTracking:eR,inEditMode:eC,isActive:n,isVisible:o,className:"w-full h-full flex",tracker:eP,onReady:tt,onEnded:td,onSplitVideo:eA,editorVideoControlsRef:eL,viewerVideoControlsRef:eM,exportMode:ez},"video-".concat(e.id,"-").concat(e.url,"-").concat(e.streamUrl)):void 0})}),eB]}),e9.map(function(e){var t,n=e.id===(null==eK?void 0:eK.id);if(e.type===v.StepType.Overlay)return(0,p.jsx)(ew,{className:(0,f.cn)({"rounded-lg overflow-hidden flex w-full h-full":!nt&&!nn&&!eJ}),style:(0,u.Z)({},(0,A.m)(A.KN.Overlay)),step:e,isLastStep:e.id===(null===(t=ep.steps[ep.steps.length-1])||void 0===t?void 0:t.id),inEditMode:eC,isActive:n,isSmallScreenOrTile:nt&&!eC,exportMode:ez,updateStep:ef,tracker:eP,onButtonClick:function(e){na(),tm({path:e})},onOverlayUrlClick:function(e){na(),tx(e)},overlayControlsRef:eV},"overlay-".concat(e.id))}),tp.type===v.StepType.Image&&(0,p.jsx)(G,{hotspots:tp.hotspots,inEditMode:eC,onHotspotClick:nw,updateHotspot:ev,deleteHotspot:eh,addHotspot:eg,tracker:eP,isZoomActive:eC?tl:nm,stageRef:eH,panAndZoomHotspotsRef:nb,hotspotTippyRef:eF}),(0,p.jsx)("div",{className:"_hotspot-tippy-container",ref:eF,style:(0,A.m)(A.KN.HotspotTippyContainer)}),nd&&eC&&eK&&(0,p.jsx)(eT,(0,s.Z)((0,u.Z)({},ng),{step:eK,updateStep:ef,previewOn:tl,zoomEditorRef:eU,mouseIsOnTopOfHotspot:ts,showPreview:function(){ta(!0),setTimeout(function(){return ta(!1)},2500)}})),(null===(L=tp.cta)||void 0===L?void 0:L.id)&&!(void 0!==eZ&&eZ)&&(0,p.jsx)(eS,{stepId:tp.id,tracker:eP,cta:tp.cta,inEditMode:eC,onReplay:function(){eG(ep.steps[0].id)},updateCTA:em}),!eC&&!ez&&(0,p.jsx)(ek,{steps:ni,onPreloadStep:e7,indicatorColor:nr,navToStep:nu,isWatermarkDisplayed:void 0===eb||eb,disableNavigation:void 0===eE||eE||!ep.showFlowNavIndicator,viewerVideoControlsRef:eM,isZoomActive:nm})]}),nt&&!eC&&(0,p.jsx)(U,{hotspot:(null==eK?void 0:eK.type)===v.StepType.Overlay?{label:"",bgColor:eK.buttonColor,textColor:eK.buttonColor?(0,w.pK)(eK.buttonColor):void 0}:null==eK?void 0:null===(M=eK.hotspots)||void 0===M?void 0:M[0],navToNextStep:function(){na(),ns()},replay:function(){return nu(no[0])}})]})}},26868:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(2784),o=n(28316);function i(e){var t=e.targetRef,n=e.children,i=(0,r.useState)(!1),l=i[0],a=i[1];return(0,r.useEffect)(function(){return a(!0)},[]),l&&t.current?(0,o.createPortal)(n,t.current):null}},74876:function(e,t,n){n.d(t,{D:function(){return o}});var r=n(2784);function o(e){var t=(0,r.useRef)();return(0,r.useEffect)(function(){t.current=e},[e]),t.current}},41926:function(e,t,n){n.d(t,{ZP:function(){return d},sc:function(){return m}});var r=n(50930),o=n(60845),i=n(269),l=n(18149),a=n.n(l),u=n(2784),s=n(76790),c=n(79826);function d(e){var t=e.steps,n=e.activeStep,o=e.skip,i=e.depth,l=void 0===i?2:i,a=(0,u.useMemo)(function(){return m(t)},[t]),c=(0,u.useMemo)(function(){return v(t,l)},[t,l]),d=(0,u.useMemo)(function(){return[p(c,n),f(c,n),]},[c,n]),h=d[0],g=d[1],x=(0,u.useState)(new Set),b=x[0],y=x[1],w=(0,u.useCallback)(function(e){(0,s.WI)(e)&&y(function(t){return t.has(e.id)?t:new Set(t).add(e.id)})},[y]),C=(0,u.useState)(new Set),S=C[0],k=C[1],j=(0,u.useCallback)(function(e){k(function(t){return t.has(e)?t:new Set(t).add(e)})},[k]),T=(0,u.useMemo)(function(){return a.find(function(e){return(0,s.WI)(e)&&!S.has(e.id)})},[a,S]);(0,u.useEffect)(function(){T&&w(T)},[T,w]);var Z=(0,u.useMemo)(function(){var e=new Map,t=!0,o=!1,i=void 0;try{for(var l,u=h[Symbol.iterator]();!(t=(l=u.next()).done);t=!0){var c=l.value;(0,s.WI)(c)&&!e.has(c.id)&&e.set(c.id,c)}}catch(d){o=!0,i=d}finally{try{t||null==u.return||u.return()}finally{if(o)throw i}}var p=!0,f=!1,v=void 0;try{for(var g,m=(0,r.Z)(S).concat((0,r.Z)(b))[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)!function(){var t=g.value;if(!e.has(t)){var n=a.find(function(e){return e.id===t});n&&e.set(t,n)}}()}catch(x){f=!0,v=x}finally{try{p||null==m.return||m.return()}finally{if(f)throw v}}return n&&(0,s.WI)(n)&&e.set(n.id,n),Array.from(e.values())},[n,h,a,b,S]);return{renderedSteps:void 0!==o&&o?[]:Z,renderedInteractiveSteps:g,onPreloadStep:w,onLoadStep:j}}var p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return[];var o=e[t.id];return o?n?o.after:(0,r.Z)(o.after).concat((0,r.Z)(o.before)):[]},f=function(e,t){if(!t)return[];var n=e[t.id];return n?[n.before.find(function(e){return e.type===i.StepType.Overlay}),n.step,].filter(function(e){return(null==e?void 0:e.type)===i.StepType.Overlay}):[]},v=function(e,t){if(!t||!e.length)return{};var n={},r=function(e){return n[e.id]||(n[e.id]={step:e,before:new Set,after:new Set}),n[e.id]};return e.forEach(function(n){var o=r(n);h(e,n,t).forEach(function(e){var t=r(e);!a()(e,n)&&(o.after.add(e),t.before.add(n))})}),Object.values(n).forEach(function(e){e.after.forEach(function(t){e.before.delete(t)})}),Object.keys(n).reduce(function(e,t){return e[t]={step:n[t].step,before:Array.from(n[t].before).reverse(),after:Array.from(n[t].after)},e},{})},h=function(e,t,n){for(var r=function(r){var i=new Set;l.forEach(function(l){var a=e.find(function(e){return e.id===l});a&&(t.id!==l&&o.set(l,a),r<n)&&g(e,a).forEach(function(e){i.add(e.id)})}),l=Array.from(i)},o=new Map,l=[t.id],a=0;a<=n;a++)r(a);return Array.from(o.values()).filter(function(e){return e.type!==i.StepType.Empty&&!e.videoProcessing})},g=function(e,t){var n,r=new Set;return(n=t.targetId&&t.targetId!==c.xv?e.find(function(e){var n=e.id;return t.targetId===n}):(0,o.getNextNonEmptyIndexedStep)(e,t,!1))&&r.add(n),t.hotspots&&Array.isArray(t.hotspots)?t.hotspots.forEach(function(n){var i;(i=n.targetId&&n.targetId!==c.xv?e.find(function(e){var t=e.id;return n.targetId===t}):(0,o.getNextNonEmptyIndexedStep)(e,t,!1))&&r.add(i)}):t.paths&&Array.isArray(t.paths)&&t.paths.forEach(function(n){var i;"step"===n.pathType&&(i=n.targetStepId&&n.targetStepId!==c.xv?e.find(function(e){var t=e.id;return n.targetStepId===t}):(0,o.getNextNonEmptyIndexedStep)(e,t,!1))&&r.add(i)}),Array.from(r)},m=function(e){if(!e.length)return[];var t=(0,o.getFirstNonEmptyStep)(e);return t?[t,].concat((0,r.Z)(h(e,t,2*e.length))):[]}},15529:function(e,t,n){n.d(t,{q:function(){return o}});var r=n(33252),o=function(e){if(e){var t=!0,n=!1,o=void 0;try{for(var i,l=e.steps[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var a=i.value,u=!0,s=!1,c=void 0;try{for(var d,p=a.hotspots[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;if(f&&f.bgColor)return{buttonBgColor:f.bgColor,buttonFgColor:f.textColor||r.defaultUserPrefs.textColor}}}catch(v){s=!0,c=v}finally{try{u||null==p.return||p.return()}finally{if(s)throw c}}}}catch(h){n=!0,o=h}finally{try{t||null==l.return||l.return()}finally{if(n)throw o}}}return{buttonBgColor:r.defaultUserPrefs.bgColor,buttonFgColor:r.defaultUserPrefs.textColor}}}}]);